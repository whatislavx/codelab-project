<%- include('../partials/header') %>

<main class="courses-page">
    <div class="container">
        <h1>Our Courses</h1>
        
        <div class="courses-filters-top">
            <div class="filter-dropdown">
                <label for="category-select">All Courses</label>
                <select name="category" id="category-select" form="filters-form" onchange="document.getElementById('filters-form').submit()">
                    <option value="all" <%= selectedCategory === 'all' ? 'selected' : '' %>>All Courses</option>
                    <option value="frontend" <%= selectedCategory === 'frontend' ? 'selected' : '' %>>Frontend</option>
                    <option value="backend" <%= selectedCategory === 'backend' ? 'selected' : '' %>>Backend</option>
                    <option value="programming" <%= selectedCategory === 'programming' ? 'selected' : '' %>>Programming</option>
                    <option value="datascience" <%= selectedCategory === 'datascience' ? 'selected' : '' %>>Data Science</option>
                    <option value="cybersecurity" <%= selectedCategory === 'cybersecurity' ? 'selected' : '' %>>Cybersecurity</option>
                    <option value="mobile" <%= selectedCategory === 'mobile' ? 'selected' : '' %>>Mobile Development</option>
                    <option value="devops" <%= selectedCategory === 'devops' ? 'selected' : '' %>>DevOps</option>
                </select>
            </div>
            <div class="filter-dropdown">
                <label for="sort-select">Most Popular</label>
                <select name="sort" id="sort-select" form="filters-form" onchange="document.getElementById('filters-form').submit()">
                    <option value="popular" <%= selectedSort === 'popular' ? 'selected' : '' %>>Most Popular</option>
                    <option value="rated" <%= selectedSort === 'rated' ? 'selected' : '' %>>Highest Rated</option>
                    <option value="price-lh" <%= selectedSort === 'price-lh' ? 'selected' : '' %>>Price: Low to High</option>
                    <option value="price-hl" <%= selectedSort === 'price-hl' ? 'selected' : '' %>>Price: High to Low</option>
                </select>
            </div>
        </div>
        
        <form id="filters-form" action="/courses" method="GET" style="display: none;"></form>
        
        <div class="courses-layout">

            <section class="course-grid">
                
                <% courses.forEach(course => { %>
                
                    <article class="course-card">
                        <img src="<%= course.img %>" alt="<%= course.title %> course banner">
                        <div class="card-content">
                            <span class="course-level"><%= course.level %></span>
                            <h3><%= course.title %></h3>
                            <p><%= course.subtitle %></p>
                            <div class="course-rating"><%= course.rating %> (<%= course.reviewsCount %> reviews)</div>
                            <div class="course-price"><%= course.price %></div>
                            
                            <a href="/course/<%= course.id %>" class="btn-details">View details</a>
                        </div>
                    </article>

                <% }) %> 
                
                <% if (courses.length === 0) { %>
                    <p>No courses found for this filter combination.</p>
                <% } %>

            </section>
        </div>

        <nav class="pagination" aria-label="Course pagination">
            <ul>
                <li><a href="#">&lt; Previous</a></li>
                <li><a href="#" class="active" aria-current="page">1</a></li>
                <li><a href="#">2</a></li>
                <li><a href="#">Next &gt;</a></li>
            </ul>
        </nav>

    </div>
</main>

<%- include('../partials/footer') %>